{"title":"User Models","markdown":{"yaml":{"description":"User Models","output-file":"0_users.html","skip_exec":true,"skip_showdoc":true,"title":"User Models"},"headingText":"Default User Model","containsRefs":false,"markdown":"\n\n\n\n<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->\n\n\nDjango comes with a built-in user model, `User`, which is located in the `django.contrib.auth.models` module. This model provides several fields and methods to manage users, such as:\n\n- `username`\n- `first_name`\n- `last_name`\n- `email`\n- `password`\n- `is_staff`\n- `is_active`\n- `is_superuser`\n- `last_login`\n- `date_joined`\n\n### Creating a Superuser\n\nTo create an admin/superuser, use the `createsuperuser` management command:\n> This command prompts you to enter a username, email, and password.\n```bash\npython manage.py createsuperuser\n\n## Authenticating Users\n\n> Django provides an `authenticate()` function in `django.contrib.auth` to verify user credentials:\n\n```python\nfrom django.contrib.auth import authenticate\n\nuser = authenticate(username='john', password='secret')\nif user is not None:\n    # A backend authenticated the credentials\nelse:\n    # No backend authenticated the credentials\n\n```\n\n### Logging In Users\n\n> To log in a user, use the `login()` function from `django.contrib.auth`\n\n```python\nfrom django.contrib.auth import login\n\nlogin(request, user)\n```\n\n### Logging Out Users\n\n> To log out a user, use the `logout()` function\n\n```python\nfrom django.contrib.auth import logout\n\nlogout(request)\n\n```\n\n## Custom User Model\n\n> Django allows you to customize the user model by extending the base model or by creating a completely new one. This is especially useful if you need to add extra fields or change the behavior of the user model.\n\n### Extending the Default User Model\n\n> If you only need to add a few extra fields to the existing user model, you can extend `AbstractUser`\n\n```python\nfrom django.contrib.auth.models import AbstractUser\n\nclass CustomUser(AbstractUser):\n    bio = models.TextField(max_length=500, blank=True)\n\n```\n\n### Creating a Custom User Model\n\n> If you need more control over the user model, you can create a custom user model by extending `AbstractBaseUser` and `PermissionsMixin`:\n\n- `UserManager`: djangos default user manager\n\n- `BaseUserManager`: custom\n\n- `AbstractUser`: djangos default user model\n- `AbstractBaseUser`: custom\n\n- `PermissionsMixin`: all the methods for django permission model\n\n```python\nfrom django.contrib.auth.models import AbstractBaseUser, BaseUserManager, PermissionsMixin\nfrom django.db import models\n\nclass CustomUserManager(BaseUserManager):\n    def create_user(self, email, password=None, **extra_fields):\n        if not email:\n            raise ValueError('The Email field must be set')\n        if not password:\n            raise ValueError('The Password field must be set')\n        email = self.normalize_email(email)\n        user = self.model(email=email, **extra_fields)\n        user.set_password(password)\n        user.save(using=self._db)\n        return user\n\n    def create_superuser(self, email, password=None, **extra_fields):\n        extra_fields.setdefault('is_staff', True)\n        extra_fields.setdefault('is_superuser', True)\n\n        if extra_fields.get('is_staff') is not True:\n            raise ValueError('Superuser must have is_staff=True.')\n        if extra_fields.get('is_superuser') is not True:\n            raise ValueError('Superuser must have is_superuser=True.')\n\n        return self.create_user(email, password, **extra_fields)\n\nclass CustomUser(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(unique=True)\n    first_name = models.CharField(max_length=30, blank=True)\n    last_name = models.CharField(max_length=30, blank=True)\n    date_joined = models.DateTimeField(auto_now_add=True)\n    is_active = models.BooleanField(default=True)\n    is_staff = models.BooleanField(default=False)\n\n    objects = CustomUserManager()\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = ['first_name', 'last_name']\n\n    def __str__(self):\n        return self.email\n\n```\n\n### Using the Custom User Model\n\n> To use the custom user model, update the `AUTH_USER_MODEL` setting in your `settings.py`\n\n```python\nAUTH_USER_MODEL = 'yourapp.CustomUser'\n\n```\n\n### Migrating to a Custom User Model\n\nSwitching to a custom user model after running migrate can be complex. It's generally recommended to set up the custom user model at the start of your project. If you need to switch to a custom user model later, you may need to:\n- Create a new model.\n- Write custom migration scripts to handle the transition.\n- Update all references to the old user model.\n\n### User Managers\n\nCustom user models often require a custom manager. The manager is responsible for creating users and superusers.\n\n- `create_user()`: Method to create a regular user.\n- `create_superuser()`: Method to create a superuser.\n\nThe custom manager should inherit from `BaseUserManager`.\n\n### Example of Custom User Manager\n\n```python\nclass CustomUserManager(BaseUserManager):\n    def create_user(self, email, password=None, **extra_fields):\n        # Implementation here...\n\n    def create_superuser(self, email, password=None, **extra_fields):\n        # Implementation here...\n\n```\n\n## User Authentication Backends\n\nDjango uses authentication backends to verify credentials. The default backend is `ModelBackend`, which authenticates against `username` and `password`.\n\nYou can create custom authentication backends by subclassing `BaseBackend`\n\n```python\nfrom django.contrib.auth.backends import BaseBackend\n\nclass EmailBackend(BaseBackend):\n    def authenticate(self, request, username=None, password=None, **kwargs):\n        try:\n            user = CustomUser.objects.get(email=username)\n        except CustomUser.DoesNotExist:\n            return None\n\n        if user.check_password(password):\n            return user\n        return None\n\n    def get_user(self, user_id):\n        try:\n            return CustomUser.objects.get(pk=user_id)\n        except CustomUser.DoesNotExist:\n            return None\n```\n\n> To use the custom backend, add it to `AUTHENTICATION_BACKENDS` in `settings.py`:\n\n\n```python\nAUTHENTICATION_BACKENDS = ['yourapp.backends.EmailBackend']\n\n```\n\n## Signals\n\n> Django signals can be used to perform actions based on user-related events, such as user creation, login, or logout.\n\n### Example of Using Signals\n\n```python\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\n\n@receiver(post_save, sender=User)\ndef create_user_profile(sender, instance, created, **kwargs):\n    if created:\n        Profile.objects.create(user=instance)\n\n```\n","srcMarkdownNoYaml":"\n\n\n\n<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->\n\n## Default User Model\n\nDjango comes with a built-in user model, `User`, which is located in the `django.contrib.auth.models` module. This model provides several fields and methods to manage users, such as:\n\n- `username`\n- `first_name`\n- `last_name`\n- `email`\n- `password`\n- `is_staff`\n- `is_active`\n- `is_superuser`\n- `last_login`\n- `date_joined`\n\n### Creating a Superuser\n\nTo create an admin/superuser, use the `createsuperuser` management command:\n> This command prompts you to enter a username, email, and password.\n```bash\npython manage.py createsuperuser\n\n## Authenticating Users\n\n> Django provides an `authenticate()` function in `django.contrib.auth` to verify user credentials:\n\n```python\nfrom django.contrib.auth import authenticate\n\nuser = authenticate(username='john', password='secret')\nif user is not None:\n    # A backend authenticated the credentials\nelse:\n    # No backend authenticated the credentials\n\n```\n\n### Logging In Users\n\n> To log in a user, use the `login()` function from `django.contrib.auth`\n\n```python\nfrom django.contrib.auth import login\n\nlogin(request, user)\n```\n\n### Logging Out Users\n\n> To log out a user, use the `logout()` function\n\n```python\nfrom django.contrib.auth import logout\n\nlogout(request)\n\n```\n\n## Custom User Model\n\n> Django allows you to customize the user model by extending the base model or by creating a completely new one. This is especially useful if you need to add extra fields or change the behavior of the user model.\n\n### Extending the Default User Model\n\n> If you only need to add a few extra fields to the existing user model, you can extend `AbstractUser`\n\n```python\nfrom django.contrib.auth.models import AbstractUser\n\nclass CustomUser(AbstractUser):\n    bio = models.TextField(max_length=500, blank=True)\n\n```\n\n### Creating a Custom User Model\n\n> If you need more control over the user model, you can create a custom user model by extending `AbstractBaseUser` and `PermissionsMixin`:\n\n- `UserManager`: djangos default user manager\n\n- `BaseUserManager`: custom\n\n- `AbstractUser`: djangos default user model\n- `AbstractBaseUser`: custom\n\n- `PermissionsMixin`: all the methods for django permission model\n\n```python\nfrom django.contrib.auth.models import AbstractBaseUser, BaseUserManager, PermissionsMixin\nfrom django.db import models\n\nclass CustomUserManager(BaseUserManager):\n    def create_user(self, email, password=None, **extra_fields):\n        if not email:\n            raise ValueError('The Email field must be set')\n        if not password:\n            raise ValueError('The Password field must be set')\n        email = self.normalize_email(email)\n        user = self.model(email=email, **extra_fields)\n        user.set_password(password)\n        user.save(using=self._db)\n        return user\n\n    def create_superuser(self, email, password=None, **extra_fields):\n        extra_fields.setdefault('is_staff', True)\n        extra_fields.setdefault('is_superuser', True)\n\n        if extra_fields.get('is_staff') is not True:\n            raise ValueError('Superuser must have is_staff=True.')\n        if extra_fields.get('is_superuser') is not True:\n            raise ValueError('Superuser must have is_superuser=True.')\n\n        return self.create_user(email, password, **extra_fields)\n\nclass CustomUser(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(unique=True)\n    first_name = models.CharField(max_length=30, blank=True)\n    last_name = models.CharField(max_length=30, blank=True)\n    date_joined = models.DateTimeField(auto_now_add=True)\n    is_active = models.BooleanField(default=True)\n    is_staff = models.BooleanField(default=False)\n\n    objects = CustomUserManager()\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = ['first_name', 'last_name']\n\n    def __str__(self):\n        return self.email\n\n```\n\n### Using the Custom User Model\n\n> To use the custom user model, update the `AUTH_USER_MODEL` setting in your `settings.py`\n\n```python\nAUTH_USER_MODEL = 'yourapp.CustomUser'\n\n```\n\n### Migrating to a Custom User Model\n\nSwitching to a custom user model after running migrate can be complex. It's generally recommended to set up the custom user model at the start of your project. If you need to switch to a custom user model later, you may need to:\n- Create a new model.\n- Write custom migration scripts to handle the transition.\n- Update all references to the old user model.\n\n### User Managers\n\nCustom user models often require a custom manager. The manager is responsible for creating users and superusers.\n\n- `create_user()`: Method to create a regular user.\n- `create_superuser()`: Method to create a superuser.\n\nThe custom manager should inherit from `BaseUserManager`.\n\n### Example of Custom User Manager\n\n```python\nclass CustomUserManager(BaseUserManager):\n    def create_user(self, email, password=None, **extra_fields):\n        # Implementation here...\n\n    def create_superuser(self, email, password=None, **extra_fields):\n        # Implementation here...\n\n```\n\n## User Authentication Backends\n\nDjango uses authentication backends to verify credentials. The default backend is `ModelBackend`, which authenticates against `username` and `password`.\n\nYou can create custom authentication backends by subclassing `BaseBackend`\n\n```python\nfrom django.contrib.auth.backends import BaseBackend\n\nclass EmailBackend(BaseBackend):\n    def authenticate(self, request, username=None, password=None, **kwargs):\n        try:\n            user = CustomUser.objects.get(email=username)\n        except CustomUser.DoesNotExist:\n            return None\n\n        if user.check_password(password):\n            return user\n        return None\n\n    def get_user(self, user_id):\n        try:\n            return CustomUser.objects.get(pk=user_id)\n        except CustomUser.DoesNotExist:\n            return None\n```\n\n> To use the custom backend, add it to `AUTHENTICATION_BACKENDS` in `settings.py`:\n\n\n```python\nAUTHENTICATION_BACKENDS = ['yourapp.backends.EmailBackend']\n\n```\n\n## Signals\n\n> Django signals can be used to perform actions based on user-related events, such as user creation, login, or logout.\n\n### Example of Using Signals\n\n```python\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\n\n@receiver(post_save, sender=User)\ndef create_user_profile(sender, instance, created, **kwargs):\n    if created:\n        Profile.objects.create(user=instance)\n\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"0_users.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.27","comments":{"utterances":{"repo":"quarto-dev/quarto-web"}},"author":"Benedict Thekkel","theme":{"light":"flatly","dark":"darkly"},"description":"User Models","skip_exec":true,"skip_showdoc":true,"title":"User Models"},"extensions":{"book":{"multiFile":true}}},"gfm":{"identifier":{"display-name":"Github (GFM)","target-format":"gfm","base-format":"gfm"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"png","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":false,"output-ext":"md","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":true,"merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"variant":"+autolink_bare_uris+emoji+footnotes+gfm_auto_identifiers+pipe_tables+strikeout+task_lists+tex_math_dollars"},"pandoc":{"standalone":true,"default-image-extension":"png","to":"commonmark","output-file":"0_users.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"comments":{"utterances":{"repo":"quarto-dev/quarto-web"}},"description":"User Models","skip_exec":true,"skip_showdoc":true,"title":"User Models"}}},"projectFormats":["html","gfm"]}